{{- $b := .block -}}
<section class="section testimonials" id="{{ $b.id | default "" }}">
  <div class="container">
    {{ with $b.content.title }}<h2 class="text-center mb-4">{{ . | markdownify }}</h2>{{ end }}
    {{ with $b.content.subtitle }}<p class="lead text-center mb-5">{{ . | markdownify }}</p>{{ end }}

    {{- $items := $b.content.items | default (slice) -}}
    <div class="row g-4 justify-content-center">
      {{ range $i, $t := $items }}
        <div class="col-12 col-md-6 col-lg-4">
          <div class="card h-100 shadow-sm">
            <div class="card-body d-flex flex-column">
              {{ with $t.quote }}
                <div class="mb-3">
                  <span class="fs-4">“</span>{{ . | markdownify }}<span class="fs-4">”</span>
                </div>
              {{ end }}

              <div class="mt-auto d-flex align-items-center gap-3">
                {{ with $t.avatar }}
                  <img
                    src="{{ (printf "/media/%s" .) | relURL }}"
                    alt="{{ $t.author | default "Testimonio" }}"
                    class="rounded-circle"
                    width="48" height="48" loading="lazy">
                {{ end }}
                <div>
                  {{ with $t.author }}<div class="fw-semibold">{{ . }}</div>{{ end }}
                  {{ with $t.role }}<div class="text-muted small">{{ . }}</div>{{ end }}
                </div>
              </div>
            </div>
          </div>
        </div>
      {{ end }}
    </div>

    {{ with $b.content.note }}<p class="small text-muted text-center mt-4">{{ . | markdownify }}</p>{{ end }}
  </div>
</section>
