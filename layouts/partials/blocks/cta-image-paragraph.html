{{- $b := or (index . "block") . -}}
{{- $c := or (index $b "content") $b -}}
{{- $items := index $c "items" -}}

<section class="section" id="{{ index $b "id" | default "" }}">
  <div class="container">
    {{ if and $items (gt (len $items) 0) }}
      {{ range $it := $items }}
        {{- $title := index $it "title" -}}
        {{- $text  := or (index $it "text") (index $it "body") (index $it "markdown") -}}
        {{- $img   := index $it "image" -}}
        <div class="row g-4 align-items-center mb-4">
          <div class="col-md-6 order-md-2">
            {{ with $img }}<img class="img-fluid" src="{{ (printf "/media/%s" .) | relURL }}" alt="">{{ end }}
          </div>
          <div class="col-md-6 order-md-1">
            <h2 class="mb-2">{{ $title | default "Título pendiente" }}</h2>
            <div class="lead">{{ $text | default "Texto pendiente" | markdownify }}</div>
          </div>
        </div>
      {{ end }}
    {{ else }}
      {{- $title := index $c "title" -}}
      {{- $text  := or (index $c "text") (index $c "body") (index $c "markdown") -}}
      {{- $img   := index $c "image" -}}
      <div class="row g-4 align-items-center">
        <div class="col-md-6 order-md-2">
          {{ with $img }}<img class="img-fluid" src="{{ (printf "/media/%s" .) | relURL }}" alt="">{{ end }}
        </div>
        <div class="col-md-6 order-md-1">
          <h2 class="mb-2">{{ $title | default "Título pendiente" }}</h2>
          <div class="lead">{{ $text | default "Texto pendiente" | markdownify }}</div>
        </div>
      </div>
    {{ end }}
  </div>
</section>
