{{/* Bloque: cta-image-paragraph (robusto a dicts y sin contenido) */}}
{{- $b := .block -}}
{{- $content := or (index $b "content") (dict) -}}

{{/* Guard: salir si no hay nada que mostrar */}}
{{- $title := index $content "title" -}}
{{- $text  := or (index $content "text") (index $content "body") (index $content "markdown") -}}
{{- $img   := index $content "image" -}}
{{- $btn   := index $content "button" -}}
{{- $hasItems := or $title $text $img $btn -}}
{{- if not $hasItems }}{{ return }}{{ end -}}

<section class="section cta-image-paragraph" id="{{ index $b "id" | default "" }}">
  <div class="container">
    <div class="row g-5 align-items-center">
      <div class="col-12 col-md-6 order-md-2">
        {{ with $img }}
          <img src="{{ (printf "/media/%s" .) | relURL }}" alt="{{ index $content "image_alt" | default "" }}" class="img-fluid">
        {{ end }}
      </div>
      <div class="col-12 col-md-6 order-md-1">
        {{ with $title }}<h2 class="mb-3">{{ . | markdownify }}</h2>{{ end }}
        {{ with $text  }}<div class="lead">{{ . | markdownify }}</div>{{ end }}
        {{ with $btn }}
          {{- $label := or (index . "label") (index . "text") -}}
          <a class="btn btn-primary mt-3" href="{{ index . "url" }}">{{ $label | default "MÃ¡s info" }}</a>
        {{ end }}
        {{/* Opcional: features como bullets si existen */}}
        {{- $features := index $content "features" | default (slice) -}}
        {{- if gt (len $features) 0 -}}
        <ul class="mt-3">
          {{- range $f := $features -}}
            <li>{{ $f | markdownify }}</li>
          {{- end -}}
        </ul>
        {{- end -}}
      </div>
    </div>
  </div>
</section>
